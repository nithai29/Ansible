---
- name: Simple user creation and changing password
  hosts: all
  become: true
  vars:
    myuser: "devops"
    mypassword: "devops"
  tasks:
  - name: Creating a new user "devops" and adding it to group sudo.
    ansible.builtin.user:
      name: "{{ myuser }}"
      comment: devops
      uid: 2000
      group: wheel
      shell: /bin/bash
        
  - name: create password
    ansible.builtin.user:
     name: "{{ myuser }}"
     state: present
     password: "{{ mypassword | password_hash('sha512') }}"