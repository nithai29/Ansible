---
 - name: Installing Ansible on the local host
   hosts: local
   become: true
   tasks:
     - name: updating the server
       yum:
         name: '*'
         state: latest

     - name: installing the prereqs
        yum:
          name: 
            - python3
            - python3-pip
            - git
            - wget
      
     - name: Enable a RHSM repository
        community.general.rhsm_repository:
          name: ansible-2.8-for-rhel-8-x86_64-rpms
      
     - name: updating the server
       yum:
         name: '*'
         state: latest

     - name: Install Ansible
         yum:
           name: ansible
           state: latest
     
     - name: Check version
         shell: 'ansible --version'
         register: ansible_version

     - debug:
         var: ansible_version
         


      
    
