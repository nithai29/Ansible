--- 
  - hosts: localhost
    gather_facts: false
    tasks:
      - name: Import VPC variables
        include_vars: vars/VPC_vars

      - name: Create the VPC
        ec2_vpc_net:
          name: "{{vpc_name}}"
          cidr_block: "{{vpc_cidr_block}} "
          region: "{{region}}"
          dns_support: yes
          dns_hostnames: yes
          tenancy: default
          state: "{{state}}"
        register: vpc_information
      
      - debug:
          var: vpc_information

      - name: Create public subnet 01
        ec2_vpc_subnet:
          vpc_id: "{{vpc_information.vpc.id}}"
          region: "{{region}}"
          az: "{{zone1}}"
          cidr: "{{pubsub01_cidr}}"
          state: "{{state}}"
          map_public: yes
          resource_tags:
            Name: "{{pubsub01_name}}"
        register: pubsub01_information

      - debug:
          var: pubsub01_information